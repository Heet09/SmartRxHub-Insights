fix: Implement robust error handling in API tests